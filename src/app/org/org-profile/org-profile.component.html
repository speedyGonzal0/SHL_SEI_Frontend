<div class="orgProfileContainer">

  <h4>{{orgService.org.name}}</h4>

  <div class="my-3">
    <div class="orgInfo row">
        <span class="website col-md col-12">
          <i class="pi pi-globe"></i>
          <p>{{orgService.org.website}}</p>
        </span>

      <span class="phone col-md col-12">
          <i class="pi pi-phone"></i>
          <p>{{orgService.org.phone}}</p>
        </span>

      <span class="email col-md col-12">
          <i class="pi pi-envelope"></i>
          <p>{{orgService.org.email}}</p>
        </span>

      <span class="address col-md col-12">
        <i class="pi pi-map-marker"></i>
        <p>{{orgService.org.address}}</p>
      </span>
    </div>
  </div>

  <p-tabView [(activeIndex)]="activeIndex">

    <p-tabPanel>
      <ng-template pTemplate="header">
        <i class="material-symbols-outlined icon me-2">stethoscope</i>
        <span>Doctors</span>
      </ng-template>
      <p-table
        styleClass="p-datatable-gridlines p-datatable-sm"
        [rowHover]="true"
        [value]="doctors"
        [lazy]="true"
        (onLazyLoad)="onPagination($event.first)"
        [paginator]="true"
        [rows]="10"
        [totalRecords]="total"
        [scrollable]="true"
        (onPage)="onPagination($event)">
        <ng-template pTemplate="header">
          <tr>
            <th> Name </th>
            <th> BMDC </th>
            <th> Consultation (BDT) </th>
            <th> Follow-up (BDT) </th>
            <th> Report (BDT) </th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-item let-index='rowIndex'>
          <tr>
            <td> {{item.doctor.name}} </td>
            <td> {{item.doctor.bmdc}}</td>
            <td> {{item.consultationFee}} </td>
            <td> {{item.followupFee}} </td>
            <td> {{item.reportFee}} </td>

          </tr>
        </ng-template>
      </p-table>
    </p-tabPanel>

    <p-tabPanel>
      <ng-template pTemplate="header">
        <i class="material-symbols-outlined icon me-2">pill</i>
        <span>Medicines</span>
      </ng-template>
      <p-table styleClass="p-datatable-sm p-datatable-gridlines" #dt
               [rowHover]="true"
               [lazy]="true"
               (onLazyLoad)="onPagination($event.first)"
               [value]="medicines"
               [paginator]="true"
               [rows]="10"
               [totalRecords]="total"
               [scrollable]="true"
      >

        <ng-template pTemplate="header">
          <tr>
            <th> # </th>
            <th> Name </th>
            <th> Generic </th>
            <th> Strength </th>
            <th> Vendor </th>
            <th> Price (BDT) </th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-item let-index='rowIndex'>
          <tr>
            <td> {{index + 1}} </td>
            <td> {{item.medicine.name}} </td>
            <td> {{item.medicine.genericName}} </td>
            <td> {{item.medicine.strength}} </td>
            <td> {{item.medicine.vendor}} </td>
            <td> {{item.medicine.price}}</td>
          </tr>
        </ng-template>
      </p-table>
    </p-tabPanel>

    <p-tabPanel>
      <ng-template pTemplate="header">
        <i class="material-symbols-outlined icon me-2">ecg</i>
        <span>Diagnostics</span>
      </ng-template>
      <p-table styleClass="p-datatable-sm p-datatable-gridlines" #dt
               [rowHover]="true"
               [lazy]="true"
               (onLazyLoad)="onPagination($event.first)"
               [value]="diagnostics"
               [paginator]="true"
               [rows]="10"
               [totalRecords]="total"
               [scrollable]="true"
      >

        <ng-template pTemplate="header">
          <tr>
            <th> # </th>
            <th> Name </th>
            <th> Price (BDT) </th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-item let-index='rowIndex'>
          <tr>
            <td> {{index+1}}</td>
            <td> {{item.serviceName}} </td>
            <td> {{item.price}} </td>
          </tr>
        </ng-template>
      </p-table>
    </p-tabPanel>

    <p-tabPanel>
      <ng-template pTemplate="header">
        <i class="material-symbols-outlined icon me-2">groups</i>
        <span>Employees</span>
      </ng-template>
      <p-table styleClass="p-datatable-sm p-datatable-gridlines" #dt
               [rowHover]="true"
               [lazy]="true"
               (onLazyLoad)="onPagination($event.first)"
               [value]="users"
               [paginator]="true"
               [rows]="10"
               [totalRecords]="total"
               [scrollable]="true"
      >

        <ng-template pTemplate="header">
          <tr>
            <th> # </th>
            <th> Name </th>
            <th> Role </th>
            <th> Email </th>
            <th> Phone </th>
            <th> Gender </th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-item let-index='rowIndex'>
          <tr>
            <td> {{item.id}}</td>
            <td> {{item.name | titlecase}} </td>
            <td> {{item.role.toString().split("ROLE_")[1].replace('_', ' ') | titlecase}}</td>
            <td> {{item.email}} </td>
            <td> {{item.phone}} </td>
            <td> {{item.gender | titlecase}} </td>
          </tr>
        </ng-template>
      </p-table>
    </p-tabPanel>

  </p-tabView>
</div>
