<p-toast position="center"></p-toast>

<form class="container-fluid p-0 m-0 d-flex flex-column gap-3" [formGroup]="appUserForm" (ngSubmit)="onSubmit()">

  <small *ngIf="appUserForm.invalid"><i>All fields are required *</i></small>

      <div class="row p-0 m-0">
        <div class="col fields">
          <label for="name">Name</label>
          <input formControlName="name"
                 id="name"
                 type="text"
                 class="p-inputtext-sm"
                 placeholder="e.g. Md Rahim"
                 pInputText
          />
          <small class="errorMsg m-0"
            *ngIf="!appUserForm.controls['name'].value
            && appUserForm.controls['name'].touched">
            This field is required!
          </small>
        </div>

      </div>

      <div class="row p-0 m-0">

        <div class="col fields">
          <label for="phone">Phone</label>
          <input formControlName="phone"
                 id="phone"
                 type="text"
                 class="p-inputtext-sm"
                 placeholder="e.g. 017xxxxxxxx"
                 pInputText
          />
          <small class="errorMsg m-0"
            *ngIf="!appUserForm.controls['phone'].value
            && appUserForm.controls['phone'].touched">
            This field is required!
          </small>
          <small class="errorMsg m-0"
                 *ngIf="appUserForm.controls['phone'].invalid
                 && appUserForm.controls['phone'].value
                 && appUserForm.controls['phone'].touched">
            This field is invalid!
          </small>
        </div>

        <div class="col fields">
          <label for="email">Email</label>
          <input formControlName="email"
                 id="email"
                 type="email"
                 class="p-inputtext-sm"
                 placeholder="e.g. sth@gmail.com"
                 pInputText/>
          <small class="errorMsg m-0"
            *ngIf="!appUserForm.controls['email'].value
            && appUserForm.controls['email'].touched">
            This field is required!
          </small>
          <small class="errorMsg m-0"
                 *ngIf="appUserForm.controls['email'].invalid
                 && appUserForm.controls['email'].value
                 && appUserForm.controls['email'].touched">
            This field is invalid!
          </small>
        </div>

      </div>


      <div class="row p-0 m-0">
        <div class="col fields">
          <label for="gender">Gender</label>
          <p-dropdown formControlName="gender"
                      [options]="appUserService.genders"
                      placeholder="-"
                      id="gender"
                      class="p-inputtext-sm"
                      [style]="{width: '100%'}"
                      optionLabel="gender">
          </p-dropdown>
          <small class="errorMsg m-0"
            *ngIf="!appUserForm.controls['gender'].value
            && appUserForm.controls['gender'].touched">
            This field is required!
          </small>
        </div>

        <div class="col fields">
          <label for="age">Age</label>
          <input formControlName="age"
                 id="age"
                 type="number"
                 class="p-inputtext-sm"
                 placeholder="e.g. 40"
                 pInputText/>
          <small class="errorMsg m-0"
            *ngIf="!appUserForm.controls['age'].value
            && appUserForm.controls['age'].touched">
            This field is required!
          </small>
          <small class="errorMsg m-0"
                 *ngIf="appUserForm.controls['age'].invalid
                 && appUserForm.controls['age'].value
                 && appUserForm.controls['age'].touched">
            This field is invalid!
          </small>
        </div>

      </div>

      <div class="row p-0 m-0">
        <div class="col fields">
          <label for="address">Address</label>
          <input formControlName="address"
                 [ngModel]="addressValue | titlecase"
                 (ngModelChange) = "addressValue = $event"
                 id="address"
                 type="text"
                 class="p-inputtext-sm"
                 placeholder="e.g. Mirpur, Dhaka"
                 pInputText
          />
          <small class="errorMsg m-0"
            *ngIf="!appUserForm.controls['address'].value
            && appUserForm.controls['address'].touched">
            This field is required!
          </small>
        </div>
      </div>


  <div class="row p-0 m-0">
        <div class="col fields" *ngIf="authService.getRole() === 'ROLE_ADMIN'; else role">
          <label for="orgID">Organization ID</label>
          <input formControlName="orgID"
                 id="orgID"
                 type="number"
                 class="p-inputtext-sm"
                 placeholder="e.g. 2"
                 pInputText/>
          <small class="errorMsg m-0"
            *ngIf="!appUserForm.controls['orgID'].value
            && appUserForm.controls['orgID'].touched">
            This field is required!
          </small>
        </div>

    <div class="col fields">
      <label for="password">Password</label>
      <p-password
        class="p-inputtext-sm p-fluid"
        [toggleMask]="true"
        id="password"
        placeholder="e.g. A Strong Password"
        formControlName="password">
        <ng-template pTemplate="footer">
          <hr>
          <ul class="pl-2 ml-2 mt-0" style="line-height: 1.5">
            <li>At least one lowercase</li>
            <li>At least one uppercase</li>
            <li>At least one numeric</li>
            <li>At least one special character</li>
            <li>Minimum 8 characters</li>
          </ul>
        </ng-template>
      </p-password>
      <!--          <input formControlName="password"-->
      <!--                 id="password"-->
      <!--                 type="password"-->
      <!--                 class="p-inputtext-sm"-->
      <!--                 placeholder="e.g. A Strong Password"-->
      <!--                 pInputText/>-->
      <small class="errorMsg m-0"
        *ngIf="!appUserForm.controls['password'].value
        && appUserForm.controls['password'].touched">
        This field is required!
      </small>

      <small class="errorMsg m-0"
             *ngIf="appUserForm.controls['password'].invalid
             && appUserForm.controls['password'].value
             && appUserForm.controls['password'].touched">
        This field is invalid!
      </small>
    </div>
      </div>


      <ng-template #role>
        <div class="col fields">
          <label for="role">Role</label>
          <p-multiSelect formControlName="role"
                         [options]="appUserService.roles"
                         placeholder="-"
                         id="role"
                         [style]="{width: '100%'}"
                         class="p-inputtext-sm"
                         optionLabel="role">
          </p-multiSelect>
          <small
            *ngIf="!appUserForm.controls['role'].value
            && appUserForm.controls['role'].touched">
            This field is required!
          </small>
        </div>
      </ng-template>

      <div class="row p-0 m-0 bg-white position-sticky bottom-0">
        <div class="col fields">
          <button pButton class=" p-button-sm"
                  type="submit" label={{submitLabel}}
                  [disabled]="!appUserForm.valid &&
                  !appUserService.editMode"></button>
        </div>
      </div>


    </form>
